{
  "_description": "This file describes the changelog for docstore in a machine-readable way.  The top-level keys are minor versions, and below them is a dict of patch versions for that minor version.  e.g. {\"v1.0\": {\"0\": ..., \"1\": ...}} is data for v1.0.0 and v1.0.1.",
  "v1.0": {
    "0": {
      "date": "2019-04-14",
      "release_contents": "Initial tagged version."
    }
  },
  "v1.1": {
    "0": {
      "date": "2019-04-14",
      "release_contents": "*   URLs in the list view are now relative URLs rather than absolute URLs.\n    This means you can run the app behind a path prefix and everything will work fine.\n\n*   If you specify a `filename` when you upload a document, set the appropriate `Content-Disposition` header when you retrieve the file.\n    This means you can download a file with its original name."
    },
    "1": {
      "date": "2019-04-15",
      "release_contents": "*   If it can't detect a file extension from the data, it throws an error rather than failing silently.\n    Pass an explicit `filename` if this happens.\n\n*   Rudimentary support for creating thumbnails from EPUB files."
    },
    "2": {
      "date": "2019-04-17",
      "release_contents": "*   Fix a bug where the \"date added\" header wasn't always shown in the table view, and you couldn't sort by date.\n\n*   Use relative links for the sort order and view order, so they work when running behind a path prefix.\n\n*   Display version information in the footer of the browser."
    }
  },
  "v1.10": {
    "0": {
      "date": "2019-07-01",
      "release_contents": "Add support for creating thumbnails from MOBI ebook files."
    },
    "1": {
      "date": "2019-07-02",
      "release_contents": "Improve the thumbnails you get from EPUB ebook files.\n\nIn particular, it's now inspecting the EPUB manifest, which means it's smarter\nabout finding a cover image, not just the largest image in the book."
    },
    "2": {
      "date": "2019-07-02",
      "release_contents": "This fixes a bug where links to tags with ampersands (`&`) would be broken.\n\nSee [alexwlchan/docstore#60](https://github.com/alexwlchan/docstore/issues/60)."
    },
    "3": {
      "date": "2019-07-02",
      "release_contents": "Change the behaviour of the underlying JSON parser so it picks up changes to the database file if edited outside the application."
    },
    "4": {
      "date": "2019-07-06",
      "release_contents": "Styling improvements:\n\n*   More consistency, less box shadows on the cards for each document\n*   The \"add document\" button now uses your accent colour\n*   The tag filter info box is grey, not a weird blue\n*   The \"new document added\" alert is now dismissable\n*   Tweak the appearance of the tag list and metadata"
    },
    "5": {
      "date": "2019-07-07",
      "release_contents": "Internal documentation improvement."
    }
  },
  "v1.11": {
    "0": {
      "date": "2019-07-08",
      "release_contents": "This release changes the underlying storage to be more human-readable.\n\nRather than storing files with an opaque UUID, they are now named with a normalised version of their original filename (if supplied).  The original, un-normalised filename is still stored in the database and returned in the `Content-Disposition` header.  If you don't supply an original filename in the upload, it uses a UUID as before.\n\nIf you want to migrate an existing docstore instance to use the more human-readable filenames, there's a (lightly tested) migration script `scripts/use_human_friendly_filenames.py` in the root of this repo."
    },
    "1": {
      "date": "2019-07-08",
      "release_contents": "Fix a cosmetic bug in the grid view with items that had a very small vertical height -- hovering over to see the info panel would obscure the entire thumbnail, and make it impossible to click through!"
    },
    "2": {
      "date": "2019-07-08",
      "release_contents": "Fix a bug that meant thumbnails weren't being created in v1.11.x."
    },
    "3": {
      "date": "2019-07-08",
      "release_contents": "Fix a tiny cosmetic issue in the display of tags on an individual document."
    },
    "4": {
      "date": "2019-07-23",
      "release_contents": "Titles in the document list are now rendered with [SmartyPants](https://daringfireball.net/projects/smartypants/), including curly quotes and nice dashes."
    },
    "5": {
      "date": "2019-07-27",
      "release_contents": "Fix a bug where the version in the footer would always show the previous version, not the current version."
    },
    "6": {
      "date": "2019-07-27",
      "release_contents": "Fix a cosmetic bug introduced in v1.11.4 where special characters would be displayed as unescaped, e.g. `It&#8217;s time for your next eye test` instead of `It\u2019s time for your next eye test`."
    },
    "7": {
      "date": "2019-07-28",
      "release_contents": "Static assets (files, thumbnails) now specify a much longer caching time, which should improve performance."
    },
    "8": {
      "date": "2019-07-29",
      "release_contents": "The app now creates thumbnails for some PDFs where previously thumbnail creation would fail.\n\nSpecifically, it now includes `qpdf`, which is used by the preview-generator library to create thumbnails of some PDFs."
    }
  },
  "v1.12": {
    "0": {
      "date": "2019-08-03",
      "release_contents": "docstore no longer checks the `\"sha256_checksum\"` value in a POST request to `/upload`.\n\nAs far as I know, nobody is routinely uploading documents with this field, so it's simpler to take it out.  I upload all my documents through the web interface, and it doesn't send this value.\n\nIf you do send a value for `\"sha256_checksum\"`, it will be stored in the database separate to the one that gets computed by docstore, like so:\n\n```json\n{\n  ...\n  \"sha256_checksum\": \"<computed by docstore>\",\n  \"user_data\": {\n    \"sha256_checksum\": \"<sent in the POST request>\"\n  }\n}\n```\n\nIf you want to check it, you'll need to check the database with your own code."
    },
    "1": {
      "date": "2019-08-03",
      "release_contents": "Add a link to the GitHub repo in the footer."
    }
  },
  "v1.13": {
    "0": {
      "date": "2019-08-03",
      "release_contents": "docstore now stores checksums in a different format.  Previously it wrote a field like:\n\n```json\n{\n  ...\n  \"sha256_checksum\": \"abc...def\"\n}\n```\n\nIt now writes a field `\"checksum\"` with the algorithm prepended, for example:\n\n```json\n{\n  ...\n  \"checksum\": \"sha256:abc...def\"\n}\n```\n\nwhich is more future-proof if I ever decide to change the checksum algorithm.\n\nOld databases will be migrated to the new format when you first run a release with the new code."
    },
    "1": {
      "date": "2019-08-03",
      "release_contents": "The Docker image is now significantly smaller (482MB rather than 832MB).\n\nThis is because it's now using `alpine` as its base image, rather than `python/3.6-jessie`."
    },
    "2": {
      "date": "2019-08-04",
      "release_contents": "Improve the user documentation, and change the default title from \"Alex's documents\" to \"docstore\"."
    },
    "3": {
      "date": "2019-08-09",
      "release_contents": "Fix a tiny cosmetic bug where selecting a tag in the document list would cause the spacing of the tags to change."
    },
    "4": {
      "date": "2019-08-09",
      "release_contents": "This fixes a small bug in the tag list if you had a heavily nested hierarchy of tags, where the hierarchy wouldn't de-nest correctly.\n\nFor example, you could see the following incorrect nesting where `delta` is indented too far:\n\n    - alfa\n      - alfa:bravo\n        - alfa:bravo:charlie\n      - delta\n\nIt also cleans up the display of tags, so rather than the above you'd see:\n\n    - alfa\n      - bravo\n        - charlie\n    - delta\n\nThis indicates four tags: `alfa`, `alfa:bravo`, `alfa:bravo:charlie` and `delta`, but with less repetition.\n\nThis new version is based on code [from Dreamwidth](https://github.com/dreamwidth/dw-free/blob/6ec1e146d3c464e506a77913f0abf0d51a944f95/styles/core2.s2#L4126)."
    },
    "5": {
      "date": "2019-08-09",
      "release_contents": "Another tweak to reduce the size of the final image.  This takes the size of the image from 518MB to 322MB."
    },
    "6": {
      "date": "2019-08-15",
      "release_contents": "This changes the way database migrations work, so they should be a lot faster and properly atomic.  When you start an instance docstore and it needs to run a migration, the web server should start a lot faster."
    },
    "7": {
      "date": "2019-08-24",
      "release_contents": "Improve the reporting of database migrations (so you'll see if docstore isn't starting because one is running), and try to recreate missing thumbnails on startup."
    }
  },
  "v1.14": {
    "0": {
      "date": "2019-08-24",
      "release_contents": "Remove the `/api/v1/recreate_thumbnails` endpoint, because I wasn't using it."
    },
    "1": {
      "date": "2019-08-26",
      "release_contents": "This is an internal refactoring that tidies up some of the code and should make testing easier. No user-visible changes."
    },
    "2": {
      "date": "2019-08-26",
      "release_contents": "More internal refactoring to improve the speed of the test suite."
    },
    "3": {
      "date": "2019-08-28",
      "release_contents": "More internal refactoring, this time to use docopt instead of CLI for the command-line parsing."
    },
    "4": {
      "date": "2019-08-28",
      "release_contents": "Fix a bug introduced in v1.14.3 that meant the container would never start.\n\nAlso add `mimetype` to the Docker image, which fixes a crash when trying to create thumbnails for some file formats (e.g. Markdown)."
    }
  },
  "v1.15": {
    "0": {
      "date": "2019-08-28",
      "release_contents": "This release makes it easier to change the document view (table/grid) and to change the sort order of documents (by title or date added).  There are new menus in the top navbar for controlling both options.\n\nIt also fixes a pair of bugs:\n\n*   If you're filtering by a tag, you can't select a second filter for it in the list of tags\n*   The app correctly remembers if you had the new document form and/or tag browser expanded, where previously it would forget\n*   It fixes an internal error that could be thrown when creating thumbnails from unusual file formats\n\nPlus more internal refactoring and extra tests."
    }
  },
  "v1.16": {
    "0": {
      "date": "2019-08-29",
      "release_contents": "Add support for pagination in the GUI app.\n\nIf you have more than 250 documents, they get broken into pages to reduce the number of items on each page (and so making the app faster and more responsive!)."
    },
    "1": {
      "date": "2019-08-29",
      "release_contents": "Fix a pair of bugs around pagination, or \"what should have been in v1.16.0\".\n\n*   Fix a bug where links in tag clouds weren't being coloured correctly\n*   Page information is dropped when filtering/unfiltering by tag, so you won't get dropped on an empty page when clicking through to a tag\n\nAnd two more miscellaneous bugfixes:\n\n*   Use the accent colour in the pagination navbar\n*   Fix the link in the"
    },
    "2": {
      "date": "2019-08-29",
      "release_contents": "Fix a bug where alerts about new uploads weren't being dismissed correctly."
    },
    "3": {
      "date": "2019-08-30",
      "release_contents": "Cosmetic tweak: use curly quotes/Smartypants when displaying the title of a docstore insatnce."
    },
    "4": {
      "date": "2019-09-19",
      "release_contents": "Improve the look of thumbnails in the grid view that don't have a title."
    },
    "5": {
      "date": "2019-09-25",
      "release_contents": "This is an internal refactor to replace responder/requests with Flask.  There should be no user-visible changes."
    },
    "6": {
      "date": "2019-09-26",
      "release_contents": "Use gunicorn to run the server, not the Flask debug server (which isn't intended for production apps)."
    }
  },
  "v1.17": {
    "0": {
      "date": "2019-09-29",
      "release_contents": "Add the ability to soft delete documents by making an HTTP DELETE:\n\n```http\nDELETE /documents/{doc_id}\n```\n\n```http\n200 OK\n{\"deleted\": \"ok\"}\n```\n\nThis will remove the documents from the database, and hide them from the web app -- but the data is still kept on disk.  There's a new folder `deleted` alongside `files` and `thumbnails` in the docstore root, and deleted data is saved there.\nYou have to delete those files outside docstore."
    },
    "1": {
      "date": "2019-09-29",
      "release_contents": "Remove a stray debugging line from 1.17.0."
    },
    "2": {
      "date": "2019-10-12",
      "release_contents": "Fix a bug where new thumbnails wouldn't reload until you restarted the app."
    }
  },
  "v1.18": {
    "0": {
      "date": "2019-11-24",
      "release_contents": "Add an option to set the page size in the GUI app.\n\nBy default, docstore shows 250 documents per page.  You can change the number of\ndocuments on each page by passing the `--page_size` flag (for example, to reduce\nthe number of thumbnails if you have lots of animated GIFs)."
    }
  },
  "v1.19": {
    "0": {
      "date": "2019-11-24",
      "release_contents": "If you're using the web app, it offers to autocomplete tags used in the current\ncontext (that is, tags used by other documents on the same page).  This should\nreduce typing and ensure more consistent tagging."
    },
    "1": {
      "date": "2019-11-26",
      "release_contents": "Tweak a bit of wording in the UI."
    }
  },
  "v1.2": {
    "0": {
      "date": "2019-04-19",
      "release_contents": "*   Add a GUI form for storing a document in the web app, so you can upload new documents through the browser.\n\n*   Display version information in the footer.\n\n*   The tag list and \"store a document\" forms are both stateful, so if you reload the page your toggle position will be preserved."
    },
    "1": {
      "date": "2019-04-21",
      "release_contents": "*   Tiny cosmetic tweak to make the \"filtering by tag X\" blurb more promionent."
    },
    "2": {
      "date": "2019-04-21",
      "release_contents": "*   Fix a tiny cosmetic issue when hovering over tag links on a document."
    }
  },
  "v1.20": {
    "0": {
      "date": "2019-12-13",
      "release_contents": "If you use the new \"actions\" menu, there's an option to delete documents directly from the UI, which is something I've wanted for a while.\n\n(As with calling the HTTP endpoint, this is only a \"soft\" delete -- the files are moved to a separate folder and disappear from the main view, but nothing is deleted from disk.)"
    },
    "1": {
      "date": "2019-12-13",
      "release_contents": "Fix a cosmetic bug introduced in v1.20.0."
    },
    "2": {
      "date": "2019-12-14",
      "release_contents": "Fix a bug in v1.20.x where deleting a document from the UI wouldn't work if you were running docstore under a path, e.g. `https://example.net/docstore`."
    }
  },
  "v1.3": {
    "0": {
      "date": "2019-04-21",
      "release_contents": "Add a \"source URL\" field to the web form and index document script, and display it in the web UI.\n\nThis makes it easier to track the original source of a document."
    },
    "1": {
      "date": "2019-04-21",
      "release_contents": "Fix a bug where tags with URL-encoded characters would be displayed incorrectly in the \"store a document\" form."
    },
    "2": {
      "date": "2019-04-21",
      "release_contents": "Tweak the URL handling so you can open links in new tabs/windows."
    },
    "3": {
      "date": "2019-04-23",
      "release_contents": "Change some of the internal storage logic so it's less likely to return a user error or server error when trying to index documents.\n\n\n\nSpecifically, change the logic for detecting filename extensions (which are mostly used for internal storage), and just don't set one if it can't be detected."
    },
    "4": {
      "date": "2019-04-23",
      "release_contents": "Tweak the display of dates in the table UI to avoid line wrapping."
    },
    "5": {
      "date": "2019-04-24",
      "release_contents": "Swap the order of the \"Store a document\" and \"Show tags\" form, so the former always appears in a consistent position."
    },
    "6": {
      "date": "2019-04-30",
      "release_contents": "Don't require a title to be set in the web GUI form."
    }
  },
  "v1.4": {
    "0": {
      "date": "2019-04-30",
      "release_contents": "Add a `--view_option` flag to the CLI, which allows you to decide whether the table or grid view should be the default view."
    },
    "1": {
      "date": "2019-05-05",
      "release_contents": "Styling and design tweaks in the UI, but no functional changes."
    }
  },
  "v1.5": {
    "0": {
      "date": "2019-05-06",
      "release_contents": "This patch improves the thumbnail generator, by using ImageMagick rather than Pillow for image resizing.  Thumbnail creation is a bit slower but higher quality.  A nice side effect is that you can now get thumbnails for animated GIFs\n\nIt also adds a new API endpoint, for triggering the recreation of all the existing thumbnails with the new code:\n\n```http\nPOST /api/v1/recreate_thumbnails\n```"
    }
  },
  "v1.7": {
    "0": {
      "date": "2019-05-07",
      "release_contents": "Change the internal data format so we don't store the document ID twice.\n\nThis means the `\"id\"` won't be written to the body of the JSON value for\na document, just stored in the database key."
    },
    "1": {
      "date": "2019-05-27",
      "release_contents": "Internal refactoring and code cleanups.  This should have no user-visible effect.\n\nDetails:\n\n*   Use pathlib.Path for handling paths internally, not strings\n*   Some of the internal methods were renamed to reduce ambiguity\n*   Removing an internal model in favour of a plain dict\n*   Better tests around the GUI viewer\n*   Checking the SHA256 checksum of a file doesn't read the whole file at once, which should be more memory efficient"
    },
    "2": {
      "date": "2019-05-27",
      "release_contents": "Bump the versions of bundled dependencies."
    },
    "3": {
      "date": "2019-05-27",
      "release_contents": "Fix two bugs related to the source URL field in the web app:\n\n*   Only display the source link if the database has a non-empty value; don't display an empty link\n*   Only store values in the database if they're non-empty; don't store empty strings"
    },
    "4": {
      "date": "2019-06-08",
      "release_contents": "This is a minor rearrangement of the Git repo to make it a bit easier to work on docstore.\n\nThere should be no user-visible effect, except that tests are no longer included in the Docker image (so it should be a shade smaller)."
    },
    "5": {
      "date": "2019-06-09",
      "release_contents": "This is a big internal refactoring to make the code easier to work with and easier to test, but with no user-facing changes.  At best, there should be some mild performance improvements."
    },
    "6": {
      "date": "2019-06-16",
      "release_contents": "Further refactoring of the underlying code to make it simpler and easier to work with."
    },
    "7": {
      "date": "2019-06-16",
      "release_contents": "This fixes a bug introduced in v1.7.6, where trying to store a document while running inside a Docker container could throw an error:\n\n```\nOSError: [Errno 18] Invalid cross-device link\n```"
    }
  },
  "v1.8": {
    "0": {
      "date": "2019-06-30",
      "release_contents": "This adds two flags for the GUI viewer:\n\n*   `--tag_view=(cloud|list)` allows you to select a tag cloud-like view in \"View Tags\", which displays tags bigger if they're more common, rather than a flat list.\n\n*   `--accent_color=#aabbcc` allows you to set an accent colour for the GUI style.  This isn't used much (yet), but gets rid of some of the blue!"
    }
  },
  "v1.9": {
    "0": {
      "date": "2019-06-30",
      "release_contents": "This is a major refactor of the viewer.  Everything now uses CSS Grid (inspired by a CodePen [by Olivia Ng](https://codepen.io/oliviale/pen/WqwOzv)) and has a more consistent layout.  The underlying code is much simpler, yay.\n\nThe new design also works much better on smaller screens.\n\nI've removed the buttons for changing the sort order because I wasn't using them.  The old URL query parameters will still work, but I'll probably delete them later."
    },
    "1": {
      "date": "2019-06-30",
      "release_contents": "Fix a bug where tags in the table view would wrap unnecessarily."
    }
  }
}